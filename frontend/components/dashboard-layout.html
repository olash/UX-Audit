<div class="flex min-h-screen bg-slate-50">
    <!-- SIDEBAR -->
    <aside class="w-64 bg-slate-950 text-white flex-shrink-0 hidden lg:flex flex-col">
        <div class="h-16 flex items-center px-6 border-b border-slate-800">
            <div class="flex items-center gap-2.5 text-white">
                <img src="../assets/images/logo-white.png" alt="UX Audit" class="h-8 w-auto">
            </div>
        </div>

        <div class="flex-1 py-6 px-3 space-y-1">
            <p class="px-3 text-[10px] font-medium text-slate-500 uppercase tracking-wider mb-2">Platform</p>

            <a href="/pages/Dashboard_Homepage.html" id="nav-dashboard"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <span class="iconify group-hover:text-emerald-400 transition-colors" data-icon="lucide:layout-dashboard"
                    data-width="18"></span>
                Dashboard
            </a>

            <a href="/pages/Create New Audit.html" id="nav-new-audit"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <span class="iconify group-hover:text-emerald-400 transition-colors" data-icon="lucide:plus-circle"
                    data-width="18"></span>
                New Audit
            </a>

            <a href="/pages/Reports.html" id="nav-reports"
                class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                <span class="iconify group-hover:text-emerald-400 transition-colors" data-icon="lucide:file-bar-chart"
                    data-width="18"></span>
                Reports
            </a>

            <div class="pt-4 mt-4 border-t border-slate-800">
                <p class="px-3 text-[10px] font-medium text-slate-500 uppercase tracking-wider mb-2">Settings</p>
                <a href="/pages/Settings.html" id="nav-settings"
                    class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                    <span class="iconify group-hover:text-emerald-400 transition-colors" data-icon="lucide:settings"
                        data-width="18"></span>
                    Settings
                </a>
                <a href="/pages/Community.html" id="nav-community" target="_blank"
                    class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition-all group">
                    <span class="iconify group-hover:text-[#5865F2] transition-colors" data-icon="simple-icons:discord"
                        data-width="18"></span>
                    Community
                </a>
            </div>
        </div>

        <div class="p-4 border-t border-slate-800">
            <div class="bg-slate-900 rounded-xl p-4 border border-slate-800">
                <div class="flex items-center gap-3 mb-3">
                    <div
                        class="w-8 h-8 rounded-full bg-emerald-500/10 text-emerald-400 flex items-center justify-center border border-emerald-500/20">
                        <span class="iconify" data-icon="lucide:zap" data-width="16"></span>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-white" id="sidebar-plan-name">Loading...</p>
                        <p class="text-[10px] text-slate-400" id="sidebar-plan-usage">...</p>
                    </div>
                </div>
                <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden mb-3">
                    <div class="h-full bg-emerald-500 w-[0%] rounded-full" id="sidebar-plan-progress" style="width: 0%">
                    </div>
                </div>
                <a href="/pages/Pricing.html" id="sidebar-upgrade-btn"
                    class="block w-full text-center py-1.5 text-[10px] font-medium text-slate-300 bg-slate-800 hover:bg-slate-700 rounded transition-colors border border-slate-700">
                    Upgrade Limit
                </a>
            </div>
        </div>
    </aside>

    <!-- MAIN AREA -->
    <div class="flex-1 flex flex-col min-w-0">
        <!-- HEADER -->
        <header
            class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 sm:px-6 lg:px-8 z-10">
            <!-- Mobile Menu Toggle -->
            <button id="mobileMenuToggle" class="lg:hidden p-2 text-slate-500 hover:text-slate-900">
                <span class="iconify" data-icon="lucide:menu" data-width="20"></span>
            </button>
            <!-- Mobile Menu (Dropdown) -->
            <nav id="mobileMenu"
                class="hidden lg:hidden absolute top-16 left-0 w-full bg-slate-900 text-white p-4 shadow-xl z-50 transform transition-all duration-200">
                <a href="/pages/Dashboard_Homepage.html"
                    class="block py-3 px-4 rounded hover:bg-slate-800 border-b border-slate-800">Dashboard</a>
                <a href="/pages/Create New Audit.html"
                    class="block py-3 px-4 rounded hover:bg-slate-800 border-b border-slate-800">New Audit</a>
                <a href="/pages/Reports.html"
                    class="block py-3 px-4 rounded hover:bg-slate-800 border-b border-slate-800">Reports</a>
                <a href="/pages/Settings.html" class="block py-3 px-4 rounded hover:bg-slate-800">Settings</a>
                <a href="/pages/Community.html" target="_blank"
                    class="block py-3 px-4 rounded hover:bg-slate-800 border-t border-slate-800 text-[#5865F2]">Community</a>
            </nav>

            <!-- Breadcrumbs -->
            <div id="breadcrumbs" class="hidden md:flex items-center gap-2 text-sm text-slate-500">
                <!-- Dynamic Content -->
            </div>

            <!-- Right Actions -->
            <div class="flex items-center gap-4">
                <!-- Usage Capsule -->
                <div id="usageCapsule" class="relative block">
                    <!-- Injected by Layout.js -->
                </div>
                <button id="notifBtn" class="text-slate-400 hover:text-slate-700 transition-colors relative">
                    <span class="iconify" data-icon="lucide:bell" data-width="18"></span>
                    <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
                </button>
                <!-- Notification Menu -->
                <div id="notifMenu"
                    class="hidden absolute top-16 right-20 w-64 bg-white border border-slate-200 rounded-lg shadow-lg z-50 p-4">
                    <p class="text-sm text-slate-500">No new notifications</p>
                </div>
                <div class="h-8 w-px bg-slate-200 mx-1"></div>

                <div class="flex items-center gap-3 pl-1 cursor-pointer group relative">
                    <div class="text-right hidden sm:block">
                        <p class="text-xs font-medium text-slate-900" id="user-name">User</p>
                        <p class="text-[10px] text-slate-500" id="user-email">Loading...</p>
                    </div>
                    <style>
                        .avatar-wrapper {
                            width: 36px;
                            height: 36px;
                            border-radius: 9999px;
                            overflow: hidden;
                            position: relative;
                            /* Added for positioning if needed */
                        }

                        .avatar-img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                        }

                        .avatar-fallback {
                            width: 100%;
                            height: 100%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            background: #f1f5f9;
                            /* slate-100 */
                            color: #334155;
                            /* slate-700 */
                            font-weight: 600;
                            text-transform: uppercase;
                        }
                    </style>
                    <div id="avatarWrapper" class="avatar-wrapper border border-indigo-100">
                        <img id="menuAvatarImg" class="avatar-img hidden" alt="User" />
                        <div id="menuAvatarFallback" class="avatar-fallback">U</div>
                    </div>
                </div>

                <button id="logoutBtn" class="p-2 text-slate-400 hover:text-red-600 transition-colors" title="Logout">
                    <span class="iconify" data-icon="lucide:log-out" data-width="18"></span>
                </button>
            </div>
        </header>

        <!-- CONTENT -->
        <main id="dashboard-content" class="flex-1 overflow-auto bg-slate-50 p-4 sm:p-6 lg:p-8">
            <!-- Page Content Injected Here -->
        </main>
    </div>

    <!-- Session Warning Modal -->
    <div id="session-warning-modal" class="fixed inset-0 z-[60] hidden" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <!-- Background backdrop -->
        <div class="fixed inset-0 bg-slate-900/75 transition-opacity"></div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div
                    class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div
                                class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-amber-100 sm:mx-0 sm:h-10 sm:w-10">
                                <span class="iconify text-amber-600" data-icon="lucide:alert-triangle"
                                    data-width="24"></span>
                            </div>
                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                                <h3 class="text-base font-semibold leading-6 text-slate-900" id="modal-title">Session
                                    Expiring</h3>
                                <div class="mt-2">
                                    <p class="text-sm text-slate-500">You will be logged out in <span
                                            id="session-countdown" class="font-bold text-slate-900">60</span> seconds
                                        due to inactivity. Do you want to stay logged in?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button type="button" onclick="App.extendSession()"
                            class="inline-flex w-full justify-center rounded-md bg-slate-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 sm:ml-3 sm:w-auto">
                            Stay Logged In
                        </button>
                        <button type="button" onclick="App.logout()"
                            class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 sm:mt-0 sm:w-auto">
                            Log out now
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>